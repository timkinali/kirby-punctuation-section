(function(){"use strict";function p(e,t,s,n,i,r,c,u){var a=typeof e=="function"?e.options:e;t&&(a.render=t,a.staticRenderFns=s,a._compiled=!0),n&&(a.functional=!0),r&&(a._scopeId="data-v-"+r);var o;if(c?(o=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),i&&i.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(c)},a._ssrRegister=o):i&&(o=u?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(a.functional){a._injectStyles=o;var b=a.render;a.render=function(E,h){return o.call(h),b(E,h)}}else{var d=a.beforeCreate;a.beforeCreate=d?[].concat(d,o):[o]}return{exports:e,options:a}}const m={props:{fieldsets:{type:Object,required:!0},clipboard:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},data(){return{label:null,instructions:{sv_SE:"Klicka på ett märke för att kopiera",en:"Click a mark to copy it to clipboard"},text:[],theme:null,activeChar:null,categoryIndex:null,lastFocusedElement:null,lastSelection:null}},created(){this.load().then(e=>{this.label=e.label,this.theme=e.theme||"none",this.instructions=this.t(this.instructions),this.text=this.fieldsets.map(t=>({...t,label:this.t(t.label),help:t.help?this.t(t.help):!1}))})},mounted(){document.addEventListener("focus",this.handleEditabeFocus,{capture:!0}),document.addEventListener("blur",this.handleInputBlur,{capture:!0}),document.addEventListener("click",this.handleDocumentClick)},beforeDestroy(){document.removeEventListener("focus",this.handleEditabeFocus,{capture:!0}),document.removeEventListener("blur",this.handleInputBlur,{capture:!0}),document.removeEventListener("click",this.handleDocumentClick)},methods:{t(e){return console.log(e.sv_SE),!e||typeof e=="string"?e:e[this.$panel.translation.code]??Object.values(e)[0]},handleEditabeFocus(e){const t=e.target;t.isContentEditable&&(this.lastFocusedElement=t,this.lastSelection=window.getSelection().getRangeAt(0).cloneRange())},handleInputBlur(e){const t=e.target;(t.tagName==="INPUT"||t.tagName==="TEXTAREA")&&(this.lastFocusedElement=t,this.lastSelection={start:t.selectionStart,end:t.selectionEnd})},handleDocumentClick(e){const t=e.target;!(t.tagName==="BUTTON"&&t.classList.contains("k-button"))&&!t.isContentEditable&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&(this.lastFocusedElement=null,this.lastSelection=null)},async writeToClipboard(e,t){if(this.activeChar=e,this.categoryIndex=t,setTimeout(()=>{this.activeChar=null,this.categoryIndex=null},2e3),this.clipboard)try{await navigator.clipboard.writeText(e),window.panel.notification.success("Copied to clipboard!")}catch{const n=`Failed writing "${e}" to clipboard. The Clipboard API is only available to secure contexts (HTTPS).`;console.error(n),this.$store.dispatch("notification/error",n)}else if(this.lastFocusedElement){if(this.lastFocusedElement.isContentEditable){const s=window.getSelection();s.removeAllRanges(),s.addRange(this.lastSelection);const n=s.getRangeAt(0),i=document.createTextNode(e);n.insertNode(i),n.setStartAfter(i),n.setEndAfter(i),this.lastSelection=n.cloneRange(),s.removeAllRanges(),s.addRange(n)}else if(this.lastFocusedElement.tagName==="INPUT"||this.lastFocusedElement.tagName==="TEXTAREA"){const s=this.lastFocusedElement.selectionStart,n=this.lastFocusedElement.selectionEnd;this.lastFocusedElement.value=this.lastFocusedElement.value.substring(0,s)+e+this.lastFocusedElement.value.substring(n),this.lastFocusedElement.selectionStart=this.lastFocusedElement.selectionEnd=s+e.length,this.lastFocusedElement.focus()}}}}};var f=function(){var t=this,s=t._self._c;return s("k-section",[s("k-box",{staticClass:"kps-box",attrs:{theme:t.theme,align:"start"}},[s("details",{staticClass:"kps-details",attrs:{open:t.open}},[s("summary",{staticClass:"k-label k-section-label kps-summary"},[s("span",{staticClass:"kps-label"},[t._v(t._s(t.label))])]),s("k-box",{staticClass:"k-help",staticStyle:{margin:"var(--spacing-2) 0 var(--spacing-4)"},attrs:{text:t.instructions,theme:"none",icon:"copy"}}),s("div",{staticClass:"container kps-space-y-1"},t._l(t.text,function(n,i){return s("div",{key:i,staticClass:"group"},[s("div",{staticClass:"kps-flex kps-items-center kps-gap-2"},[s("span",[t._v(t._s(n.label)+":")]),s("k-button-group",{staticClass:"kps-gap-1"},t._l(n.chars,function(r,c){return s("k-button",{key:c,class:[i===t.categoryIndex&&r===t.activeChar&&"kps-outline kps-outline-2 kps-outline-[var(--color-focus)]"],attrs:{variant:"filled",size:"xs"},on:{click:function(u){return t.writeToClipboard(r,i)}}},[t._v(" "+t._s(r)+" ")])}),1)],1),n.help?s("k-text",{staticClass:"kps-text-[var(--color-text-dimmed)]",attrs:{html:n.help}}):t._e()],1)}),0)],1)])],1)},g=[],v=p(m,f,g,!1,null,"5a7d364e",null,null);const _=v.exports;window.panel.plugin("johannschopplich/punctuation-section",{sections:{punctuation:_}})})();
